<html>
<body>

<input id=act value="home" size=50>

<script src=nav.js></script>

<script>

	function getQueryData() {
		var o = {}
		var s = document.location.search
		if(s) {
			var kv = s.substr(1).split("&")
			for(var i = 0; i < kv.length; i++) {
				var aa = kv[i].split("=")
				o[aa[0]] = decodeURIComponent(aa[1])
			}
		}
		return o
	}

	function div(id) { return "<div onclick='go(this.id, this.clientX)' id=__id__>__id__</div>".replace(/__id__/g,id) }
	"home products about contact".split(' ').forEach(function(v) {
		document.write(div(v));
	})


	// -------------------------------

	var data = getQueryData()
	if(!data.page)
		data.page = "home"

	function show(d) {
		document.getElementById('act').value = JSON.stringify(d)
	}

	function go(page) {
		if(page != data.page) {
			data.page = page
			Nav(data)
		}
	}

	Nav(data, show)

</script>

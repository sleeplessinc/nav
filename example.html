<html>
<head>

	<style>
		.pg1, .pg0 { border: solid 1px #aaa; padding: 1em; font-size: 140%; }
		.pg1 { display: block; }
		.pg0 { display: none; }
	</style>

	<script src=nav.js></script>

</head>
<body>

<h2>Nav()</h2>
<p>
Nav() assists in buiding web-apps.
It supports navigation using the new "pushstate" system of modern browsers.
It lets you navigate through pseudo "pages" within an actual page
without any reloading from the web server.
<p>
This is valuable because it dramatically:
<ul>
	<li> reduces load on the web server
	<li> reduced bandwidth requirements for both client and server
	<li> increases user interface responsiveness for the user
</ul>
However, because of its reliance on the query string arguments,
Nav() is not SEO friendly, even though this example simulates a simple website.
It is intended for navigation within a web-app with pages that
won't need to be indexed by search engines.
<p>
Note how as you click on the menu items, the page content changes,
but no requests are made to the server.  
It's all loaded up front.
Clicking the buttons is just "showing you" different things within the fetched html.
Note also, that you can "reload" the page at any point and the page shows
you the correct content.
Bookmarks can also be made and returned to.
<p>

<center>
<script>

	var doc = document

	function write(s) { doc.write(s) }
	function elem(id) { return doc.getElementById(id) }

	// Generate a simulate set of pages with a menu button for each one

	var pages = "home about products contact".split(' ')

	function mkitem(id) {
		return "<input type=button value=X onclick='go(this.value)'>".replace(/X/g, id)
	}
	write("<hr>");
	pages.forEach(function(v) {
		write(mkitem(v));
	})
	write("<hr>");

	function mkpage(id) {
		return "<div id='X' class=pg0>Content for ''X'' page.</div>".replace(/X/g, id)
	}
	pages.forEach(function(v) {
		write(mkpage(v));
	})



	// Now this is how we use Nav()


	function show(data) {

		// hide all divs
		pages.forEach(function(v) {
			elem(v).className = "pg0"
		})

		// re-show requested div
		elem(data.content).className = "pg1"		
	}

	
	function go(content) {
		var data = {content:content}	// note: this is transformed into query string
		Nav(data)
	}


	Nav(show) // tell nav about our "show a page" callback


</script>
